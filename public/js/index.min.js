!function(){var a={apiKey:"AIzaSyDgNzcJS-zqj-I3yUUXJp7EXp-6Vd6XsOo",authDomain:"boardex-b8a9e.firebaseapp.com",databaseURL:"https://boardex-b8a9e.firebaseio.com",storageBucket:"boardex-b8a9e.appspot.com",messagingSenderId:"762957983152"};firebase.initializeApp(a)}();const a=firebase.auth(),b=firebase.database();firebase.storage();!function(){Vue.use(VueFire);var a=b.ref("games"),c=b.ref("tagging"),d=new Vue({el:"#app",data:{tags:[],titles:"",isShowAll:!0,isShowSidebar:!1},firebase:{games:a,allGames:a},methods:{filterGame:function(){if(d.tags.length<1)return d.isShowAll=!0,void(d.games=d.allGames);d.isShowAll=!1,d.titles="",d.games="",console.log("tags: "+JSON.stringify(d.tags));for(tag of d.tags){var a=c.child("tags/"+tag);a.once("value",a=>{console.debug(a.key),a.val()?Array.isArray(d.titles)?(console.debug("titles and titles[tag]"),console.debug(d.titles),console.debug(Object.keys(a.val())),d.titles=this.intersect(d.titles,Object.keys(a.val()))):d.titles=Object.keys(a.val()):d.titles=[],d.updateGameList(),console.log(d.titles)})}},intersect:function(a,b){return a.length<1||b.length<1?[]:a.filter(a=>{return b.indexOf(a)>=0})},updateGameList:function(){d.games=[];for(title of d.titles){var b=a.child(title);b.once("value",a=>{if(null!=a.val()){var b=a.val();b[".key"]=a.key,d.games.push(b)}})}},clearTags:function(){d.tags=[]},toggleSidebar:function(){console.debug("hey"),d.isShowSidebar=!d.isShowSidebar}}})}(),function(){const b=document.getElementById("signup"),c=document.getElementById("signin"),d=document.getElementById("signout");d.addEventListener("click",b=>{a.signOut(),alert("You have succesfully signed out.")}),a.onAuthStateChanged(a=>{a?(console.log(a),console.log("logged in"),b.classList.add("hide"),c.classList.add("hide"),d.classList.remove("hide")):(console.log("not logged in"),b.classList.remove("hide"),c.classList.remove("hide"),d.classList.add("hide"))})}(),function(){Vue.use(VueFire);var a=b.ref("games");new Vue({el:"#searchbar",data:{searchString:"",gamesList:[],loadedGamesList:[],displayList:[],isSearch:!1},created:function(){a.on("value",a=>{let b=[];a.forEach(a=>{b.push(a.key)}),this.gamesList=b,this.loadedGamesList=b})},methods:{initializeItems:function(){this.gamesList=this.loadedGamesList},search:function(){var a=this.searchString;return this.isSearch=!0,this.initializeItems(),a?(a=a.trim().toLowerCase(),this.gamesList=this.gamesList.filter(b=>{if(a)return b.toLowerCase().indexOf(a)>-1}),void console.log("final list: "+this.gamesList)):void(this.isSearch=!1)},submitSearch:function(){location.href="info.html?t="+this.gamesList[0]}}})}();